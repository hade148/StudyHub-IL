# מדריך התחלה מהירה - אחסון קבצים ב-Azure

## סיכום קצר 📝

המערכת שודרגה להעלאת קבצים לענן של מיקרוסופט (Azure Blob Storage) במקום לשמור אותם על השרת.

## מה זה אומר? 🤔

**לפני:** קבצים נשמרו בתיקייה `uploads` על השרת  
**עכשיו:** קבצים נשמרים בענן של Microsoft Azure

## יתרונות ✨

- 📦 **אין בעיית מקום** - הענן מנהל את המקום עבורכם
- 🔄 **גיבוי אוטומטי** - 3 עותקים של כל קובץ
- ⚡ **הורדות מהירות** - ישירות מהענן של מיקרוסופט
- 💰 **חינם** - 5GB חינמיים עם Azure for Students
- 🔒 **בטוח** - כל הגישה מאובטחת

## הגדרה ראשונית 🚀

### 1. הוסיפו את הפרטים ל-`.env`

צרו קובץ `server/.env` והוסיפו:

```env
AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;AccountName=studyhubil;AccountKey=i7kat5GXWjUJD5keJlWxPHATHU2Oa2KLPhfo+9XJQXYIlm87lGOIPVjtHZDaeNvNuMu8TpmrEeob+AStCVUxNA==;EndpointSuffix=core.windows.net"
AZURE_STORAGE_CONTAINER_NAME="studyhub-files"
```

⚠️ **חשוב:** אל תעלו את הקובץ `.env` ל-Git! הוא כבר ב-`.gitignore`

### 2. התקינו את החבילות

```bash
cd server
npm install
```

### 3. הריצו את השרת

```bash
cd server
npm run dev
```

אם הכל תקין, תראו:
```
✅ Azure Blob Storage initialized successfully
```

## איך זה עובד? 🔄

### העלאת קובץ

1. משתמש נכנס לאתר
2. לוחץ על "העלה סיכום"
3. בוחר קובץ PDF או DOCX (עד 10MB)
4. ממלא פרטים: כותרת, קורס, תיאור
5. לוחץ "פרסם סיכום"

**מה קורה מאחורי הקלעים:**
```
קובץ → שרת שלנו → Azure Blob Storage
             ↓
      מסד נתונים (פרטי הקובץ)
```

### הורדת קובץ

1. משתמש לוחץ על סיכום
2. לוחץ "הורדה"
3. הקובץ נפתח/מתחיל להוריד

**מה קורה מאחורי הקלעים:**
```
לחיצה → שרת נותן URL → Azure Blob Storage → הקובץ מגיע למשתמש
```

## סוגי קבצים נתמכים 📄

✅ **PDF** - קבצי PDF  
✅ **DOCX** - קבצי Word  
❌ **אחרים** - לא נתמכים כרגע

**גודל מקסימלי:** 10MB לכל קובץ

## איפה הקבצים נשמרים? 📍

```
חשבון Azure: studyhubil
  └── Container: studyhub-files
       ├── summary-1234567890-123456789.pdf
       ├── summary-1234567891-987654321.docx
       └── עוד קבצים...
```

כל קובץ מקבל שם ייחודי עם timestamp כדי למנוע התנגשויות.

## בדיקה מהירה ✅

### בדקו שהכל עובד:

1. **התחברו** עם המשתמש לבדיקה:
   - אימייל: `student@studyhub.local`
   - סיסמה: `password123`

2. **עלו סיכום:**
   - לחצו "סיכומים" ← "העלה סיכום"
   - העלו קובץ PDF
   - מלאו פרטים
   - פרסמו

3. **וודאו הצלחה:**
   - צץ חלון הצלחה ✅
   - הסיכום מופיע ברשימה
   - אפשר להוריד אותו
   - הקובץ קיים ב-Azure Portal

## בעיות נפוצות ❗

### "Azure Storage is not configured"
- בדקו שה-Connection String נכון ב-`.env`
- אתחלו את השרת מחדש

### "רק קבצי PDF ו-DOCX מותרים"
- הקובץ לא בפורמט הנכון
- שנו את סיומת הקובץ או המירו אותו

### "הקובץ גדול מדי"
- הקובץ מעל 10MB
- דחסו את הקובץ או פצלו אותו

### הקובץ לא מתקבל
- בדקו חיבור לאינטרנט
- וודאו שה-Azure Storage Account פעיל
- בדקו שה-Container קיים

## איך לראות קבצים ב-Azure Portal? 👀

1. היכנסו ל-[Azure Portal](https://portal.azure.com)
2. חפשו "Storage accounts"
3. בחרו `studyhubil`
4. לחצו "Containers"
5. בחרו `studyhub-files`
6. כאן תראו את כל הקבצים שהועלו!

## תמיכה טכנית 🆘

אם משהו לא עובד:

1. בדקו את ה-logs של השרת
2. בדקו את ה-Console בדפדפן (F12)
3. קראו את `TESTING_GUIDE.md` למבחנים מפורטים
4. קראו את `AZURE_STORAGE.md` למידע טכני נוסף

## משהו חשוב! ⚡

- **אל תעלו את ה-`.env` ל-Git** - יש שם מפתח סודי!
- **וודאו שה-Container ב-Azure פומבי** - כדי שאפשר להוריד קבצים
- **עקבו אחרי השימוש ב-Azure** - יש מגבלה של 5GB חינם

## מה הלאה? 🚀

העלאת קבצים עובדת מצוין! אפשר להמשיך ב:

- הוספת תצוגה מקדימה לקבצים
- תמיכה בסוגי קבצים נוספים
- סריקת וירוסים לקבצים
- דחיסת קבצים אוטומטית

## סיכום 🎯

**מה שינינו:**
- קבצים עכשיו ב-Azure במקום על השרת
- תמיכה ב-PDF ו-DOCX (עד 10MB)
- הורדות מהירות ישירות מהענן
- ממשק משתמש משופר

**מה צריך לעשות:**
1. להוסיף את הפרטים ל-`.env`
2. להריץ `npm install`
3. להריץ את השרת
4. לבדוק שהכל עובד

**זהו! 🎉**

המערכת מוכנה לשימוש. כל קובץ שיועלה מעכשיו ישמר ב-Azure.
